namespace = wizinit

character_event = {
	id = wizinit.3
	desc = WIZSPECDESC
	picture = GFX_evt_wizard

	is_triggered_only = yes

	trigger = {
		z_wizard = yes
		OR = {
			AND = {
				ai = yes
				is_save_game = no
			}
			NOT = { has_character_flag = wizspellinit3 }
		}
	}

	immediate = {
		set_character_flag = wizspellinit3
	}

	option = {
		ai_chance = {
			factor = 10
		}
		name = WIZSPEC1
		add_trait = wiz_abjuration
	}
	option = {
		ai_chance = {
			factor = 10
		}
		name = WIZSPEC2
		add_trait = wiz_transmutation
	}
	option = {
		ai_chance = {
			factor = 10
		}
		name = WIZSPEC3
		add_trait = wiz_conjuration
	}
	option = {
		trigger = {
			ai = no
		}
		name = TB_OPT_MORE
		character_event = { id = wizinit.4 }
	}
	option = {
		ai_chance = {
			factor = 10
		}
		trigger = {
			ai = yes
		}
		name = OK
		add_trait = wiz_divination
	}
	option = {
		ai_chance = {
			factor = 10
		}
		trigger = {
			ai = yes
		}
		name = OK
		add_trait = wiz_enchantment
	}
	option = {
		ai_chance = {
			factor = 10
		}
		trigger = {
			ai = yes
		}
		name = OK
		add_trait = wiz_evocation
	}
	option = {
		ai_chance = {
			factor = 10
		}
		trigger = {
			ai = yes
		}
		name = OK
		add_trait = wiz_illusion
	}
	option = {
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.2
				OR = {
					trait = kind
					religion_group = good_human_pantheon_group
				}
			}
			modifier = {
				factor = 10
				OR = {
					religion_group = evil_human_pantheon_group
					religion_group = drow_pantheon_group
					religion_group = aberration_group
				}
			}
			modifier = {
				factor = 1000
				OR = {
					trait = undead
					trait = lich
					trait = vampire
					trait = vampire_spawn
					trait = patron_velsharoon
					trait = patron_myrkul
					religion = kiaransalee
					religion = thasmudyanic
				}
			}
		}
		trigger = {
			ai = yes
			NOT = { trait = patron_kelemvor }
		}
		name = OK
		add_trait = wiz_necromancy
	}
	option = {
		trigger = {
			ai = yes
			year = 1359
		}
		name = OK
		add_character_modifier = {
			name = wiz_wild
			duration = -1
		}
	}
}
character_event = {
	id = wizinit.4
	desc = WIZSPECDESC
	picture = GFX_evt_wizard

	is_triggered_only = yes

	option = {
		name = WIZSPEC4
		add_trait = wiz_divination
	}
	option = {
		name = WIZSPEC5
		add_trait = wiz_enchantment
	}
	option = {
		name = WIZSPEC6
		add_trait = wiz_evocation
	}
	option = {
		name = TB_OPT_MORE
		character_event = { id = wizinit.5 }
	}
}

character_event = {
	id = wizinit.5
	desc = WIZSPECDESC
	picture = GFX_evt_wizard

	is_triggered_only = yes

	option = {
		name = WIZSPEC7
		add_trait = wiz_illusion
	}
	option = {
		trigger = {
			NOT = { trait = patron_kelemvor }
		}
		name = WIZSPEC8
		add_trait = wiz_necromancy
	}
	option = {
		name = TB_OPT_BACK
		clr_character_flag = wizspellinit3
		character_event = { id = wizinit.3 }
	}
}

character_event = {
	id = wizinit.6
	desc = WIZINIT.6
	picture = GFX_evt_wizard
	
	is_triggered_only = yes
	
	option = {
		name = WIZINIT.6.a
		add_trait = longevity
	}
}

character_event = {
	id = wizinit.7
	desc = WIZINIT.7
	picture = GFX_evt_acererak_1
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOR = {
				AND = {
					religion_group = good_human_pantheon_group
					NOR = {
						religion = mulhorandi_faith
						religion = untheric_faith
					}
				}
				religion_group = elven_pantheon_group
				religion = natural
				religion = adama
				religion = dwarven_pantheon
				religion = gnome_pantheon
				religion = bahamut
				religion = earthmother_reformed
				religion = earthmother
				religion = yuir_reformed
				religion = yuir
				religion = ubtao_worship
				religion = ubtao_reformed
			}
		}
		name = WIZINIT.7.a
		add_trait = lich
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						trait = creature_human
						trait = creature_aasimar
						trait = creature_tiefling
						trait = creature_half_giant
						trait = creature_genasi
						trait = creature_gith
						trait = creature_gnome
						trait = creature_halfling
						trait = creature_centaur
						trait = creature_wemic
					}
				}
				set_graphical_culture = lich
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_malison
						trait = creature_pureblood
					}
				}
				set_graphical_culture = cambion
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_elf
						trait = creature_sea_elf
						trait = creature_eladrin
						trait = creature_feyri
						trait = creature_drow
						trait = creature_half_elf
					}
				}
				set_graphical_culture = undeadelf
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_dwarf
						trait = creature_half_dwarf
					}
				}
				set_graphical_culture = dwarfvampire
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_naga
						trait = creature_abomination
						trait = creature_sarrukh
					}
				}
				set_graphical_culture = bone_naga
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_ogre
						trait = creature_half_ogre
						trait = creature_ogrillon
					}
				}
				set_graphical_culture = undeadogre
			}
		}
	}
	
	option = {
		trigger = {
			NOR = {
				religion_group = evil_human_pantheon_group
				religion_group = drow_pantheon
				religion_group = goblin_pantheon_group
				religion_group = orc_pantheon_group
				religion_group = aberration_group
				religion = deities_of_fury
				religion = laduguer
				religion = urdlen
				religion = vaprak
				religion = tiamat
				religion = entropy
				religion = blue_flame
			}
		}
		name = WIZINIT.7.b
		add_trait = archlich
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						trait = creature_human
						trait = creature_aasimar
						trait = creature_tiefling
						trait = creature_half_giant
						trait = creature_genasi
						trait = creature_gith
						trait = creature_gnome
						trait = creature_halfling
						trait = creature_centaur
						trait = creature_wemic
					}
				}
				set_graphical_culture = lich
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_malison
						trait = creature_pureblood
					}
				}
				set_graphical_culture = cambion
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_elf
						trait = creature_sea_elf
						trait = creature_eladrin
						trait = creature_feyri
						trait = creature_drow
						trait = creature_half_elf
					}
				}
				set_graphical_culture = undeadelf
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_dwarf
						trait = creature_half_dwarf
					}
				}
				set_graphical_culture = dwarfvampire
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_naga
						trait = creature_abomination
						trait = creature_sarrukh
					}
				}
				set_graphical_culture = bone_naga
			}
			else_if = {
				limit = {
					OR = {
						trait = creature_ogre
						trait = creature_half_ogre
						trait = creature_ogrillon
					}
				}
				set_graphical_culture = undeadogre
			}
		}
	}
}